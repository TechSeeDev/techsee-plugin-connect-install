#!/usr/bin/env node
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
require("source-map-support/register");
const cdk = require("aws-cdk-lib");
const save_config_stack_1 = require("../lib/save-config-stack");
const web_app_stack_1 = require("../lib/web-app-stack");
const constants_1 = require("../lib/constants");
const sso_stack_1 = require("../lib/sso-stack");
const api_with_s3_1 = require("../lib/api-with-s3");
const app = new cdk.App();
// stack 1
const saveConfigStack = new save_config_stack_1.SaveConfigStack(app, constants_1.default.CONFIG_STACK, {});
// stack 2
const wepAppStack = new web_app_stack_1.WepAppStack(app, constants_1.default.WEB_APP_STACK, {});
// stack 3
const ssoStack = new sso_stack_1.SsoStack(app, constants_1.default.SSO_STACK, {
    tscc_provisioning_api_url: saveConfigStack.tscc_provisioning_api_url,
    tscc_activation_api_url: saveConfigStack.tscc_activation_api_url,
    distributionDomainName: wepAppStack.distributionDomainName,
    bucketName: wepAppStack.Bucket
});
new api_with_s3_1.S3RestApiStack(app, constants_1.default.API_S3_STACK, {
    tscc_provisioning_api_url: saveConfigStack.tscc_provisioning_api_url,
    tscc_activation_api_url: saveConfigStack.tscc_activation_api_url,
    tscc_sso_api_url: ssoStack.tscc_sso_api_url,
    bucket_name: wepAppStack.Bucket
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2RrLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiY2RrLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQUNBLHVDQUFxQztBQUNyQyxtQ0FBbUM7QUFDbkMsZ0VBQTJEO0FBQzNELHdEQUFtRDtBQUNuRCxnREFBNEM7QUFDNUMsZ0RBQTRDO0FBRTVDLG9EQUFvRDtBQUVwRCxNQUFNLEdBQUcsR0FBRyxJQUFJLEdBQUcsQ0FBQyxHQUFHLEVBQUUsQ0FBQztBQUMxQixVQUFVO0FBQ1YsTUFBTSxlQUFlLEdBQUcsSUFBSSxtQ0FBZSxDQUFDLEdBQUcsRUFBRSxtQkFBWSxDQUFDLFlBQVksRUFBRSxFQUFFLENBQUMsQ0FBQztBQUVoRixVQUFVO0FBQ1YsTUFBTSxXQUFXLEdBQUcsSUFBSSwyQkFBVyxDQUFDLEdBQUcsRUFBRSxtQkFBWSxDQUFDLGFBQWEsRUFBRSxFQUFFLENBQUMsQ0FBQztBQUV6RSxVQUFVO0FBQ1QsTUFBTSxRQUFRLEdBQUcsSUFBSSxvQkFBUSxDQUFDLEdBQUcsRUFBRSxtQkFBWSxDQUFDLFNBQVMsRUFBRTtJQUN4RCx5QkFBeUIsRUFBRSxlQUFlLENBQUMseUJBQXlCO0lBQ3BFLHVCQUF1QixFQUFFLGVBQWUsQ0FBQyx1QkFBdUI7SUFDaEUsc0JBQXNCLEVBQUUsV0FBVyxDQUFDLHNCQUFzQjtJQUMxRCxVQUFVLEVBQUUsV0FBVyxDQUFDLE1BQU07Q0FDakMsQ0FBQyxDQUFDO0FBR0gsSUFBSSw0QkFBYyxDQUFDLEdBQUcsRUFBQyxtQkFBWSxDQUFDLFlBQVksRUFBQztJQUM3Qyx5QkFBeUIsRUFBRSxlQUFlLENBQUMseUJBQXlCO0lBQ3BFLHVCQUF1QixFQUFFLGVBQWUsQ0FBQyx1QkFBdUI7SUFDaEUsZ0JBQWdCLEVBQUMsUUFBUSxDQUFDLGdCQUFnQjtJQUMxQyxXQUFXLEVBQUUsV0FBVyxDQUFDLE1BQU07Q0FDbEMsQ0FBQyxDQUFBO0FBQ0YsNENBQTRDO0FBQzVDLG1FQUFtRTtBQUNuRSxtREFBbUQ7QUFDbkQsdURBQXVEO0FBQ3ZELHNDQUFzQztBQUN0QyxNQUFNIiwic291cmNlc0NvbnRlbnQiOlsiIyEvdXNyL2Jpbi9lbnYgbm9kZVxyXG5pbXBvcnQgXCJzb3VyY2UtbWFwLXN1cHBvcnQvcmVnaXN0ZXJcIjtcclxuaW1wb3J0ICogYXMgY2RrIGZyb20gXCJhd3MtY2RrLWxpYlwiO1xyXG5pbXBvcnQgeyBTYXZlQ29uZmlnU3RhY2sgfSBmcm9tIFwiLi4vbGliL3NhdmUtY29uZmlnLXN0YWNrXCI7XHJcbmltcG9ydCB7IFdlcEFwcFN0YWNrIH0gZnJvbSBcIi4uL2xpYi93ZWItYXBwLXN0YWNrXCI7XHJcbmltcG9ydCBSZXNvdXJjZU5hbWUgZnJvbSBcIi4uL2xpYi9jb25zdGFudHNcIjtcclxuaW1wb3J0IHsgU3NvU3RhY2sgfSBmcm9tIFwiLi4vbGliL3Nzby1zdGFja1wiO1xyXG5pbXBvcnQgeyBTM1RvQ2xvdWRGcm9udFN0YWNrIH0gZnJvbSBcIi4uL2xpYi9zMy1jbG91ZEZyb250LXN0YWNrXCI7XHJcbmltcG9ydCB7IFMzUmVzdEFwaVN0YWNrIH0gZnJvbSBcIi4uL2xpYi9hcGktd2l0aC1zM1wiO1xyXG5cclxuY29uc3QgYXBwID0gbmV3IGNkay5BcHAoKTtcclxuLy8gc3RhY2sgMVxyXG5jb25zdCBzYXZlQ29uZmlnU3RhY2sgPSBuZXcgU2F2ZUNvbmZpZ1N0YWNrKGFwcCwgUmVzb3VyY2VOYW1lLkNPTkZJR19TVEFDSywge30pO1xyXG5cclxuLy8gc3RhY2sgMlxyXG5jb25zdCB3ZXBBcHBTdGFjayA9IG5ldyBXZXBBcHBTdGFjayhhcHAsIFJlc291cmNlTmFtZS5XRUJfQVBQX1NUQUNLLCB7fSk7XHJcblxyXG4vLyBzdGFjayAzXHJcbiBjb25zdCBzc29TdGFjaz0gIG5ldyBTc29TdGFjayhhcHAsIFJlc291cmNlTmFtZS5TU09fU1RBQ0ssIHtcclxuICAgIHRzY2NfcHJvdmlzaW9uaW5nX2FwaV91cmw6IHNhdmVDb25maWdTdGFjay50c2NjX3Byb3Zpc2lvbmluZ19hcGlfdXJsLFxyXG4gICAgdHNjY19hY3RpdmF0aW9uX2FwaV91cmw6IHNhdmVDb25maWdTdGFjay50c2NjX2FjdGl2YXRpb25fYXBpX3VybCxcclxuICAgIGRpc3RyaWJ1dGlvbkRvbWFpbk5hbWU6IHdlcEFwcFN0YWNrLmRpc3RyaWJ1dGlvbkRvbWFpbk5hbWUsXHJcbiAgICBidWNrZXROYW1lOiB3ZXBBcHBTdGFjay5CdWNrZXRcclxufSk7XHJcblxyXG5cclxubmV3IFMzUmVzdEFwaVN0YWNrKGFwcCxSZXNvdXJjZU5hbWUuQVBJX1MzX1NUQUNLLHtcclxuICAgIHRzY2NfcHJvdmlzaW9uaW5nX2FwaV91cmw6IHNhdmVDb25maWdTdGFjay50c2NjX3Byb3Zpc2lvbmluZ19hcGlfdXJsLFxyXG4gICAgdHNjY19hY3RpdmF0aW9uX2FwaV91cmw6IHNhdmVDb25maWdTdGFjay50c2NjX2FjdGl2YXRpb25fYXBpX3VybCxcclxuICAgIHRzY2Nfc3NvX2FwaV91cmw6c3NvU3RhY2sudHNjY19zc29fYXBpX3VybCxcclxuICAgIGJ1Y2tldF9uYW1lOiB3ZXBBcHBTdGFjay5CdWNrZXRcclxufSlcclxuLy8gc3RhY2sgNCByZW1vdmUgUzNUb0Nsb3VkRnJvbnRTdGFjayBsYW1kYSBcclxuLy8gbmV3IFMzVG9DbG91ZEZyb250U3RhY2soYXBwLCBSZXNvdXJjZU5hbWUuUzNfQ0xPVURGUk9OVF9TVEFDSywge1xyXG4vLyAgICAgZGlzdHJpYnV0aW9uX0lkOiB3ZXBBcHBTdGFjay5kaXN0cmlidXRpb25JZCxcclxuLy8gICAgIGRvbWFpbl9uYW1lOiB3ZXBBcHBTdGFjay5kaXN0cmlidXRpb25Eb21haW5OYW1lLFxyXG4vLyAgICAgYnVja2V0X25hbWU6IHdlcEFwcFN0YWNrLkJ1Y2tldFxyXG4vLyB9KTtcclxuIl19